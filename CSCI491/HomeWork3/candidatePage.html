<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery-1.11.3.js"></script>
</head>
<body>
    <p id="result"></p>
    <form>
        Enter a search term<br>
        Date: <input type="text" name="date" placeholder="xx-xxx-xx"><br>
        City: <input type="text" name="city" placeholder="city"><br>
        <button type="button" onclick="search()">Enter</button>
    </form>
</body>

<script>
    var encodedData = window.location.href.split('=')[1];
    var choice = decodeURI(encodedData);
    var test = JSON.parse(localStorage.getItem('info'));
    var total = 0;
    var container = $('#result');

    $(document).ready(function() {
        for (var i = 1; i < test.length; i++){

            var candidateName = test[i].cand_nm;
            candidateName = candidateName.replace(/^"(.*)"$/, '$1');
            //console.log(candidateName);
            if(candidateName == choice) {

                if(test[i].contb_receipt_amt != null){
                    total += parseInt(test[i].contb_receipt_amt) || 0;
                }
            }
        }

        $.ajax({
            url: "candidates.xml",
            type: "GET",
            dataType: "xml",
            success: function (xml) {

                $(xml).find('candidate').each(function(){
                    var name = $(this).find('name').text();

                    if(choice == name){

                        var image = "<img height='200' width='200' id="+name+" src = " + $(this).find('caption').text() + " >";
                        var state = $(this).find('state').text();

                        $(container).append(image, "<br>", name, "<br>", state, "<br>", "Total donations: $" + total, "<br>");
                    }
                });
            }
        })
    });

    function search(){

    }

    function byDate(){
        var test = JSON.parse(localStorage.getItem('info'));
        for (var i = 1; i < test.length; i++){

            var candidateName = test[i].cand_nm;
            candidateName = candidateName.replace(/^"(.*)"$/, '$1');
            //console.log(candidateName);
            if(candidateName == choice) {

            }
        }
        $(container).append("<br><br>", "The total donations for " + choice + " is $" + total);
    }

    function byCity(){
        var test = JSON.parse(localStorage.getItem('info'));

        for (var i = 1; i < test.length; i++){

            var candidateName = test[i].cand_nm;
            candidateName = candidateName.replace(/^"(.*)"$/, '$1');
            //console.log(candidateName);
            if(candidateName == choice) {

                if(test[i].contb_receipt_amt != null){
                    total += parseInt(test[i].contb_receipt_amt) || 0;
                }
            }
        }
        $(container).append("<br><br>", "The total donations for " + choice + " is $" + total);

    }

</script>
</html>